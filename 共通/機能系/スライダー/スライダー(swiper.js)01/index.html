<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Swiper Slider Samples</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <div class="slider-container">
      <!-- フェードインスライダー -->
      <div class="swiper fade-slider">
        <div class="swiper-wrapper">
          <div class="swiper-slide"><img src="img/image01.jpg" alt="" /></div>
          <div class="swiper-slide"><img src="img/image02.jpg" alt="" /></div>
          <div class="swiper-slide"><img src="img/image03.jpg" alt="" /></div>
        </div>
      </div>

      <!-- 矢印ナビゲーション付きスライダー -->
      <div class="swiper arrow-slider">
        <div class="swiper-wrapper">
          <div class="swiper-slide"><img src="img/image01.jpg" alt="" /></div>
          <div class="swiper-slide"><img src="img/image02.jpg" alt="" /></div>
          <div class="swiper-slide"><img src="img/image03.jpg" alt="" /></div>
        </div>
        <div class="swiper-button-next"></div>
        <div class="swiper-button-prev"></div>
      </div>
    </div>

    <script>
      document.addEventListener('DOMContentLoaded', function () {
        new Swiper('.fade-slider', {
          effect: 'fade',
          loop: true,
          autoplay: { delay: 2000 },
        });

        new Swiper('.arrow-slider', {
          loop: true,
          navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev',
          },
        });
      });
    </script>

    <!-- サムネイル画像をクリックして切り替わるスライダー -->
    <div class="swiper-container main-slider">
      <div class="swiper-wrapper">
        <div class="swiper-slide">
          <img src="img/image01.jpg" alt="Image 1" />
        </div>
        <div class="swiper-slide">
          <img src="img/image02.jpg" alt="Image 2" />
        </div>
        <div class="swiper-slide">
          <img src="img/image03.jpg" alt="Image 3" />
        </div>
      </div>
    </div>
    <div class="swiper-container thumbnail-slider">
      <div class="swiper-wrapper">
        <div class="swiper-slide">
          <img src="img/image01.jpg" alt="Thumb 1" />
        </div>
        <div class="swiper-slide">
          <img src="img/image02.jpg" alt="Thumb 2" />
        </div>
        <div class="swiper-slide">
          <img src="img/image03.jpg" alt="Thumb 3" />
        </div>
      </div>
    </div>

    <!-- プログレスバー付きでフェードインで切り替わるスライダー -->
    <div class="swiper-container progress-slider">
      <div class="swiper-wrapper">
        <div class="swiper-slide">
          <img src="img/image01.jpg" alt="Slide 1" />
        </div>
        <div class="swiper-slide">
          <img src="img/image02.jpg" alt="Slide 2" />
        </div>
        <div class="swiper-slide">
          <img src="img/image03.jpg" alt="Slide 3" />
        </div>
      </div>
      <div class="swiper-pagination"></div>
    </div>

    <script defer>
      // サムネイル画像をクリックして切り替わるスライダー
      var thumbnailSlider = new Swiper('.thumbnail-slider', {
        slidesPerView: 3,
        spaceBetween: 10,
        watchSlidesProgress: true,
      });
      var mainSlider = new Swiper('.main-slider', {
        effect: 'fade',
        thumbs: {
          swiper: thumbnailSlider,
        },
      });

      // プログレスバー付きフェードインスライダー
      // var progressBars = document.querySelectorAll('.swiper-progress-bar span');
      // var progressSwiper = new Swiper('.progress-slider', {
      //   effect: 'fade',
      //   loop: true,
      //   autoplay: {
      //     delay: 2000,
      //     disableOnInteraction: false,
      //   },
      //   on: {
      //     slideChangeTransitionStart: function () {
      //       let activeIndex = this.realIndex;

      //       // 全てのプログレスバーから active クラスを削除
      //       progressBars.forEach((bar, index) => {
      //         if (index >= activeIndex) {
      //           bar.classList.remove('active');
      //         }
      //       });

      //       // 表示中のスライドに対応するプログレスバーに active クラスを付与
      //       for (let i = 0; i <= activeIndex; i++) {
      //         progressBars[i].classList.add('active');
      //       }
      //     },
      //   },
      // });

      // プログレスバー付きフェードインスライダー
      var progressSlider = new Swiper('.progress-slider', {
        effect: 'fade',
        loop: true,
        autoplay: {
          delay: 2000,
          disableOnInteraction: false,
        },
        pagination: {
          el: '.swiper-pagination',
          clickable: true,
        },
        on: {
          slideChangeTransitionStart: function () {
            let activeIndex = this.realIndex; // 現在のスライドインデックス
            let progressBars = document.querySelectorAll(
              '.swiper-pagination-bullet'
            );

            // 全てのプログレスバーから active クラスを削除
            progressBars.forEach((bar, index) => {
              bar.classList.remove('swiper-pagination-bullet-active');
              bar.classList.remove('swiper-pagination-bullet-active-now');
              if (index === activeIndex) {
                progressBars[index].classList.add(
                  'swiper-pagination-bullet-active-now'
                );
              }
              if (index < activeIndex) {
                progressBars[index].classList.add(
                  'swiper-pagination-bullet-active'
                );
              }
            });

            // 表示中のスライドに対応するプログレスバーに active クラスを付与
            // for (let i = 0; i <= activeIndex; i++) {
            //   progressBars[i].classList.add('swiper-pagination-bullet-active');
            // }
          },
        },
      });
    </script>
  </body>
</html>
